{"title":"RabbitMQ安装手记","slug":"RabbitMQ安装与查看","date":"2020-05-20T13:11:02.664Z","updated":"2020-06-11T06:14:22.494Z","comments":true,"path":"api/articles/RabbitMQ安装与查看.json","excerpt":" [Figure] ","covers":["https://picabstract-preview-ftn.weiyun.com/ftn_pic_abs_v3/6dc3748c6f8f734ed016e26433dcb1bd47fabf3f4483695ad831c27c04d1018fcc079f70156d61de551e0937c259914b?pictype=scale&amp;from=30013&amp;version=3.3.3.3&amp;uin=1643994375&amp;fname=rabbitMQ.jpg&amp;size=750"],"content":"<p><img src=\"https://picabstract-preview-ftn.weiyun.com/ftn_pic_abs_v3/6dc3748c6f8f734ed016e26433dcb1bd47fabf3f4483695ad831c27c04d1018fcc079f70156d61de551e0937c259914b?pictype=scale&amp;from=30013&amp;version=3.3.3.3&amp;uin=1643994375&amp;fname=rabbitMQ.jpg&amp;size=750\" alt><a id=\"more\"></a></p>\n<h2 id=\"是什么\"><a href=\"#是什么\" class=\"headerlink\" title=\"是什么\"></a>是什么</h2><p>RabbitMQ是一个实现了AMQP协议的消息代理软件，就是俗称的消息队列，这里的mq是message queue的缩写，是使用erlang语言编写而成。</p>\n<h2 id=\"安装过程\"><a href=\"#安装过程\" class=\"headerlink\" title=\"安装过程\"></a>安装过程</h2><h3 id=\"windows安装\"><a href=\"#windows安装\" class=\"headerlink\" title=\"windows安装\"></a>windows安装</h3><p>因为mq是使用erlang编写的 所以我们需要先安装erlang的环境来支撑mq的运行，<a href=\"https://www.erlang.org/downloads\" target=\"_blank\" rel=\"noopener\">erlang下载地址</a>,然后我们需要下载rabbitmq的安装包，<a href=\"https://www.rabbitmq.com/download.html\" target=\"_blank\" rel=\"noopener\">RabbitMQ下载地址</a> 准备工作完成，开始安装。</p>\n<h4 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h4><p>安装的方法都非常简单，next一路点就完事儿，但是安装rabbitmq时需要注意，这里的默认路径时c盘的路径，路径中是有一个空格的，这个安装中不能够包含空格和中文字符</p>\n<h4 id=\"配置环境变量\"><a href=\"#配置环境变量\" class=\"headerlink\" title=\"配置环境变量\"></a>配置环境变量</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在环境变量中新增:</span><br><span class=\"line\">1. ERLANG_HOME=xxx\\xxx\\erlx.x.x</span><br><span class=\"line\">2. RABBITMQ_SERVER=x:\\xxx\\xxx\\rabbitmq_server-x.x.x</span><br><span class=\"line\">修改path</span><br><span class=\"line\">1. %ERLANG_HOME%\\bin;\t\t\t//erlang的</span><br><span class=\"line\">2. %RABBITMQ_SERVER%\\sbin;\t\t//rabbitmq的</span><br></pre></td></tr></table></figure>\n<p>然后打开命令行通过 <code>erl</code> 来确定erlang环境是否安装成功，<code>rabbitmq-service</code>来确定rabbitmq是否安装成功，有相应即为安装成功。</p>\n<h4 id=\"启动rabbitmq服务\"><a href=\"#启动rabbitmq服务\" class=\"headerlink\" title=\"启动rabbitmq服务\"></a>启动rabbitmq服务</h4><p>这时的mq已经和mysql一样成为服务，并默认自动启动，这时进入安装的mq\\sbin目录，打开管理员命令行窗口，依次执行如下命令：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rabbitmq-service.bat stop</span><br><span class=\"line\">rabbitmq-service.bat install</span><br><span class=\"line\">rabbitmq-service.bat start</span><br></pre></td></tr></table></figure></p>\n<p>这时通过localhost:15672就能够打开web管理页面了，默认账号密码都为：guest</p>\n<h5 id=\"注意事项-1\"><a href=\"#注意事项-1\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h5><p>这里需要注意的是执行命令时可能会出现各种乱七八糟的错误，这时百度上前辈已经先踩了很多坑，看看就能解决很多问题，记录一个最弱的错误，错误的内容依稀记得一句<code>more then 20</code> 我想大概是版本不匹配，<a href=\"https://www.cnblogs.com/gne-hwz/p/10714013.html\" target=\"_blank\" rel=\"noopener\">rabbitMQ和对应的erlang版本匹配指南</a>，这篇文章解决了我犯的这个弱鸡问题，其他问题贴也有浏览，但是没有碰到就不贴了。</p>\n<h3 id=\"Linux安装\"><a href=\"#Linux安装\" class=\"headerlink\" title=\"Linux安装\"></a>Linux安装</h3><p>####erlang的环境</p>\n<ol>\n<li><p>安装依赖环境</p>\n<blockquote>\n<p>yum -y install make gcc gcc-c++ kernel-devel m4 ncurses-devel openssl-devel</p>\n</blockquote>\n</li>\n<li><p>无图形化就安装ncurses</p>\n<blockquote>\n<p>yum -y install ncurses-devel</p>\n</blockquote>\n</li>\n<li><p>安装erlang</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://erlang.org/download/otp_src_18.2.1.tar.gz</span><br><span class=\"line\">tar xvfz otp_src_18.2.1.tar.gz </span><br><span class=\"line\">./configure </span><br><span class=\"line\">make &amp; make install</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>配置环境</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br><span class=\"line\">export PAHT=$PATH:/usr/local/erlang/bin</span><br><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>测试是否安装成功</p>\n<blockquote>\n<p><code>erl</code> 有反应即为成功  <code>halt().</code> 可退出输入行<br>或者输入 <code>erl-version</code>有反应也可行</p>\n</blockquote>\n</li>\n</ol>\n<h4 id=\"rabbitmq安装\"><a href=\"#rabbitmq安装\" class=\"headerlink\" title=\"rabbitmq安装\"></a>rabbitmq安装</h4><ol>\n<li><p>下载压缩包</p>\n<blockquote>\n<p>wget <a href=\"http://www.rabbitmq.com/releases/rabbitmq-server/v3.6.3/rabbitmq-server-generic-unix-3.6.3.tar.xz\" target=\"_blank\" rel=\"noopener\">http://www.rabbitmq.com/releases/rabbitmq-server/v3.6.3/rabbitmq-server-generic-unix-3.6.3.tar.xz</a></p>\n</blockquote>\n</li>\n<li><p>解压压缩包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 这种包需要先解xz</span><br><span class=\"line\">xz -d rabbitmq-server-generic-unix-3.6.3.tar.xz</span><br><span class=\"line\">2. 解压tar压缩包</span><br><span class=\"line\">tar -xvf rabbitmq-server-generic-unix-3.6.3.tar</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>配置环境变量并刷新</p>\n<blockquote>\n<p>export PATH=$PATH:/usr/local/rabbitmq/sbin</p>\n</blockquote>\n</li>\n<li><p>启动mq</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rabbitmq-plugins enable rabbitmq_management   #启动后台管理界面</span><br><span class=\"line\">rabbitmq-server -detached   #后台运行rabbitmq</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>不报错基本上就配置成功了，记得开相应端口。</p>\n<h4 id=\"注意事项-2\"><a href=\"#注意事项-2\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h4><ol>\n<li><p>这里的guest是不能够登录的，我们需要自己给一个账号</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">添加用户: rabbitmqctl add_user admin admin</span><br><span class=\"line\">添加权限: rabbitmqctl set_permissions -p &quot;/&quot; pwd123 &quot;.&quot; &quot;.&quot; &quot;.*&quot;</span><br><span class=\"line\">修改用户角色: rabbitmqctl set_user_tags admin administrator</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>这里可能出现的几种错误</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. erllang环境问题</span><br><span class=\"line\">Redirecting to /bin/systemctl start  rabbitmq-server.service</span><br><span class=\"line\">Failed to start rabbitmq-server.service: Unit not found</span><br><span class=\"line\">2. 没有给用户权限 运用到项目中</span><br><span class=\"line\">Exception in thread &quot;main&quot; java.io.IOException</span><br><span class=\"line\">at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:xxx</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"end\"><a href=\"#end\" class=\"headerlink\" title=\"end\"></a>end</h2>","more":"</p>\n<h2 id=\"是什么\"><a href=\"#是什么\" class=\"headerlink\" title=\"是什么\"></a>是什么</h2><p>RabbitMQ是一个实现了AMQP协议的消息代理软件，就是俗称的消息队列，这里的mq是message queue的缩写，是使用erlang语言编写而成。</p>\n<h2 id=\"安装过程\"><a href=\"#安装过程\" class=\"headerlink\" title=\"安装过程\"></a>安装过程</h2><h3 id=\"windows安装\"><a href=\"#windows安装\" class=\"headerlink\" title=\"windows安装\"></a>windows安装</h3><p>因为mq是使用erlang编写的 所以我们需要先安装erlang的环境来支撑mq的运行，<a href=\"https://www.erlang.org/downloads\" target=\"_blank\" rel=\"noopener\">erlang下载地址</a>,然后我们需要下载rabbitmq的安装包，<a href=\"https://www.rabbitmq.com/download.html\" target=\"_blank\" rel=\"noopener\">RabbitMQ下载地址</a> 准备工作完成，开始安装。</p>\n<h4 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h4><p>安装的方法都非常简单，next一路点就完事儿，但是安装rabbitmq时需要注意，这里的默认路径时c盘的路径，路径中是有一个空格的，这个安装中不能够包含空格和中文字符</p>\n<h4 id=\"配置环境变量\"><a href=\"#配置环境变量\" class=\"headerlink\" title=\"配置环境变量\"></a>配置环境变量</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在环境变量中新增:</span><br><span class=\"line\">1. ERLANG_HOME=xxx\\xxx\\erlx.x.x</span><br><span class=\"line\">2. RABBITMQ_SERVER=x:\\xxx\\xxx\\rabbitmq_server-x.x.x</span><br><span class=\"line\">修改path</span><br><span class=\"line\">1. %ERLANG_HOME%\\bin;\t\t\t//erlang的</span><br><span class=\"line\">2. %RABBITMQ_SERVER%\\sbin;\t\t//rabbitmq的</span><br></pre></td></tr></table></figure>\n<p>然后打开命令行通过 <code>erl</code> 来确定erlang环境是否安装成功，<code>rabbitmq-service</code>来确定rabbitmq是否安装成功，有相应即为安装成功。</p>\n<h4 id=\"启动rabbitmq服务\"><a href=\"#启动rabbitmq服务\" class=\"headerlink\" title=\"启动rabbitmq服务\"></a>启动rabbitmq服务</h4><p>这时的mq已经和mysql一样成为服务，并默认自动启动，这时进入安装的mq\\sbin目录，打开管理员命令行窗口，依次执行如下命令：<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rabbitmq-service.bat stop</span><br><span class=\"line\">rabbitmq-service.bat install</span><br><span class=\"line\">rabbitmq-service.bat start</span><br></pre></td></tr></table></figure></p>\n<p>这时通过localhost:15672就能够打开web管理页面了，默认账号密码都为：guest</p>\n<h5 id=\"注意事项-1\"><a href=\"#注意事项-1\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h5><p>这里需要注意的是执行命令时可能会出现各种乱七八糟的错误，这时百度上前辈已经先踩了很多坑，看看就能解决很多问题，记录一个最弱的错误，错误的内容依稀记得一句<code>more then 20</code> 我想大概是版本不匹配，<a href=\"https://www.cnblogs.com/gne-hwz/p/10714013.html\" target=\"_blank\" rel=\"noopener\">rabbitMQ和对应的erlang版本匹配指南</a>，这篇文章解决了我犯的这个弱鸡问题，其他问题贴也有浏览，但是没有碰到就不贴了。</p>\n<h3 id=\"Linux安装\"><a href=\"#Linux安装\" class=\"headerlink\" title=\"Linux安装\"></a>Linux安装</h3><p>####erlang的环境</p>\n<ol>\n<li><p>安装依赖环境</p>\n<blockquote>\n<p>yum -y install make gcc gcc-c++ kernel-devel m4 ncurses-devel openssl-devel</p>\n</blockquote>\n</li>\n<li><p>无图形化就安装ncurses</p>\n<blockquote>\n<p>yum -y install ncurses-devel</p>\n</blockquote>\n</li>\n<li><p>安装erlang</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://erlang.org/download/otp_src_18.2.1.tar.gz</span><br><span class=\"line\">tar xvfz otp_src_18.2.1.tar.gz </span><br><span class=\"line\">./configure </span><br><span class=\"line\">make &amp; make install</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>配置环境</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/profile</span><br><span class=\"line\">export PAHT=$PATH:/usr/local/erlang/bin</span><br><span class=\"line\">source /etc/profile</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>测试是否安装成功</p>\n<blockquote>\n<p><code>erl</code> 有反应即为成功  <code>halt().</code> 可退出输入行<br>或者输入 <code>erl-version</code>有反应也可行</p>\n</blockquote>\n</li>\n</ol>\n<h4 id=\"rabbitmq安装\"><a href=\"#rabbitmq安装\" class=\"headerlink\" title=\"rabbitmq安装\"></a>rabbitmq安装</h4><ol>\n<li><p>下载压缩包</p>\n<blockquote>\n<p>wget <a href=\"http://www.rabbitmq.com/releases/rabbitmq-server/v3.6.3/rabbitmq-server-generic-unix-3.6.3.tar.xz\" target=\"_blank\" rel=\"noopener\">http://www.rabbitmq.com/releases/rabbitmq-server/v3.6.3/rabbitmq-server-generic-unix-3.6.3.tar.xz</a></p>\n</blockquote>\n</li>\n<li><p>解压压缩包</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. 这种包需要先解xz</span><br><span class=\"line\">xz -d rabbitmq-server-generic-unix-3.6.3.tar.xz</span><br><span class=\"line\">2. 解压tar压缩包</span><br><span class=\"line\">tar -xvf rabbitmq-server-generic-unix-3.6.3.tar</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>配置环境变量并刷新</p>\n<blockquote>\n<p>export PATH=$PATH:/usr/local/rabbitmq/sbin</p>\n</blockquote>\n</li>\n<li><p>启动mq</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rabbitmq-plugins enable rabbitmq_management   #启动后台管理界面</span><br><span class=\"line\">rabbitmq-server -detached   #后台运行rabbitmq</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>不报错基本上就配置成功了，记得开相应端口。</p>\n<h4 id=\"注意事项-2\"><a href=\"#注意事项-2\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h4><ol>\n<li><p>这里的guest是不能够登录的，我们需要自己给一个账号</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">添加用户: rabbitmqctl add_user admin admin</span><br><span class=\"line\">添加权限: rabbitmqctl set_permissions -p &quot;/&quot; pwd123 &quot;.&quot; &quot;.&quot; &quot;.*&quot;</span><br><span class=\"line\">修改用户角色: rabbitmqctl set_user_tags admin administrator</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>这里可能出现的几种错误</p>\n <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">1. erllang环境问题</span><br><span class=\"line\">Redirecting to /bin/systemctl start  rabbitmq-server.service</span><br><span class=\"line\">Failed to start rabbitmq-server.service: Unit not found</span><br><span class=\"line\">2. 没有给用户权限 运用到项目中</span><br><span class=\"line\">Exception in thread &quot;main&quot; java.io.IOException</span><br><span class=\"line\">at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:xxx</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"end\"><a href=\"#end\" class=\"headerlink\" title=\"end\"></a>end</h2>","categories":[{"name":"MQ","path":"api/categories/MQ.json"}],"tags":[{"name":"安装与配置","path":"api/tags/安装与配置.json"},{"name":"RabbitMQ","path":"api/tags/RabbitMQ.json"},{"name":"消息队列","path":"api/tags/消息队列.json"}]}